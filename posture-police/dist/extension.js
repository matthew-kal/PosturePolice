"use strict";var br=Object.create;var B=Object.defineProperty;var Pr=Object.getOwnPropertyDescriptor;var xr=Object.getOwnPropertyNames;var Cr=Object.getPrototypeOf,Sr=Object.prototype.hasOwnProperty;var E=(e,r)=>()=>(e&&(r=e(e=0)),r);var v=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),re=(e,r)=>{for(var t in r)B(e,t,{get:r[t],enumerable:!0})},be=(e,r,t,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of xr(r))!Sr.call(e,o)&&o!==t&&B(e,o,{get:()=>r[o],enumerable:!(s=Pr(r,o))||s.enumerable});return e};var f=(e,r,t)=>(t=e!=null?br(Cr(e)):{},be(r||!e||!e.__esModule?B(t,"default",{value:e,enumerable:!0}):t,e)),Er=e=>be(B({},"__esModule",{value:!0}),e);var xe=v((yt,Pe)=>{"use strict";Pe.exports=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}});var Se=v((vt,Ce)=>{var H=1e3,_=H*60,I=_*60,M=I*24,Dr=M*365.25;Ce.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return Tr(e);if(t==="number"&&isNaN(e)===!1)return r.long?Lr(e):kr(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Tr(e){if(e=String(e),!(e.length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),s=(r[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return t*Dr;case"days":case"day":case"d":return t*M;case"hours":case"hour":case"hrs":case"hr":case"h":return t*I;case"minutes":case"minute":case"mins":case"min":case"m":return t*_;case"seconds":case"second":case"secs":case"sec":case"s":return t*H;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function kr(e){return e>=M?Math.round(e/M)+"d":e>=I?Math.round(e/I)+"h":e>=_?Math.round(e/_)+"m":e>=H?Math.round(e/H)+"s":e+"ms"}function Lr(e){return j(e,M,"day")||j(e,I,"hour")||j(e,_,"minute")||j(e,H,"second")||e+" ms"}function j(e,r,t){if(!(e<r))return e<r*1.5?Math.floor(e/r)+" "+t:Math.ceil(e/r)+" "+t+"s"}});var oe=v((i,Ee)=>{i=Ee.exports=se.debug=se.default=se;i.coerce=Or;i.disable=$r;i.enable=Ar;i.enabled=Fr;i.humanize=Se();i.names=[];i.skips=[];i.formatters={};var te;function Rr(e){var r=0,t;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return i.colors[Math.abs(r)%i.colors.length]}function se(e){function r(){if(r.enabled){var t=r,s=+new Date,o=s-(te||s);t.diff=o,t.prev=te,t.curr=s,te=s;for(var n=new Array(arguments.length),c=0;c<n.length;c++)n[c]=arguments[c];n[0]=i.coerce(n[0]),typeof n[0]!="string"&&n.unshift("%O");var d=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(q,yr){if(q==="%%")return q;d++;var ve=i.formatters[yr];if(typeof ve=="function"){var vr=n[d];q=ve.call(t,vr),n.splice(d,1),d--}return q}),i.formatArgs.call(t,n);var S=r.log||i.log||console.log.bind(console);S.apply(t,n)}}return r.namespace=e,r.enabled=i.enabled(e),r.useColors=i.useColors(),r.color=Rr(e),typeof i.init=="function"&&i.init(r),r}function Ar(e){i.save(e),i.names=[],i.skips=[];for(var r=(typeof e=="string"?e:"").split(/[\s,]+/),t=r.length,s=0;s<t;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),e[0]==="-"?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")))}function $r(){i.enable("")}function Fr(e){var r,t;for(r=0,t=i.skips.length;r<t;r++)if(i.skips[r].test(e))return!1;for(r=0,t=i.names.length;r<t;r++)if(i.names[r].test(e))return!0;return!1}function Or(e){return e instanceof Error?e.stack||e.message:e}});var ke=v((p,Te)=>{p=Te.exports=oe();p.log=Ir;p.formatArgs=_r;p.save=Mr;p.load=De;p.useColors=Hr;p.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:Ur();p.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function Hr(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}p.formatters.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function _r(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+p.humanize(this.diff),!!r){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var s=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(n){n!=="%%"&&(s++,n==="%c"&&(o=s))}),e.splice(o,0,t)}}function Ir(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function Mr(e){try{e==null?p.storage.removeItem("debug"):p.storage.debug=e}catch{}}function De(){var e;try{e=p.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}p.enable(De());function Ur(){try{return window.localStorage}catch{}}});var $e=v((u,Ae)=>{var Le=require("tty"),U=require("util");u=Ae.exports=oe();u.init=zr;u.log=qr;u.formatArgs=Wr;u.save=Br;u.load=Re;u.useColors=Nr;u.colors=[6,2,3,4,5,1];u.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,r){var t=r.substring(6).toLowerCase().replace(/_([a-z])/g,function(o,n){return n.toUpperCase()}),s=process.env[r];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),e[t]=s,e},{});var D=parseInt(process.env.DEBUG_FD,10)||2;D!==1&&D!==2&&U.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var Gr=D===1?process.stdout:D===2?process.stderr:jr(D);function Nr(){return"colors"in u.inspectOpts?!!u.inspectOpts.colors:Le.isatty(D)}u.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,U.inspect(e,this.inspectOpts).split(`
`).map(function(r){return r.trim()}).join(" ")};u.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,U.inspect(e,this.inspectOpts)};function Wr(e){var r=this.namespace,t=this.useColors;if(t){var s=this.color,o="  \x1B[3"+s+";1m"+r+" \x1B[0m";e[0]=o+e[0].split(`
`).join(`
`+o),e.push("\x1B[3"+s+"m+"+u.humanize(this.diff)+"\x1B[0m")}else e[0]=new Date().toUTCString()+" "+r+" "+e[0]}function qr(){return Gr.write(U.format.apply(U,arguments)+`
`)}function Br(e){e==null?delete process.env.DEBUG:process.env.DEBUG=e}function Re(){return process.env.DEBUG}function jr(e){var r,t=process.binding("tty_wrap");switch(t.guessHandleType(e)){case"TTY":r=new Le.WriteStream(e),r._type="tty",r._handle&&r._handle.unref&&r._handle.unref();break;case"FILE":var s=require("fs");r=new s.SyncWriteStream(e,{autoClose:!1}),r._type="fs";break;case"PIPE":case"TCP":var o=require("net");r=new o.Socket({fd:e,readable:!1,writable:!0}),r.readable=!1,r.read=null,r._type="pipe",r._handle&&r._handle.unref&&r._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return r.fd=e,r._isStdio=!0,r}function zr(e){e.inspectOpts={};for(var r=Object.keys(u.inspectOpts),t=0;t<r.length;t++)e.inspectOpts[r[t]]=u.inspectOpts[r[t]]}u.enable(Re())});var Fe=v((bt,ne)=>{typeof process<"u"&&process.type==="renderer"?ne.exports=ke():ne.exports=$e()});var Me=v(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=typeof performance<"u"&&performance,Ie;Oe=process.hrtime,ie=function(){var e=Oe();return e[0]*1e9+e[1]},He=ie(),Ie=function(){return(ie()-He)/1e6};var Oe,ie,He,_e=l&&l.now?function(){return l.now()}:Ie;function z(e){if(!e)throw new Error("name must be non-empty")}function Vr(e,r){for(var t=0,s=e.length,o;t<s;)o=t+s>>>1,e[o].startTime<r.startTime?t=o+1:s=o;e.splice(t,0,r)}h.mark=void 0;h.stop=void 0;h.getEntries=void 0;h.clear=void 0;l&&l.mark&&l.measure&&l.getEntriesByName&&l.getEntriesByType&&l.clearMarks&&l.clearMeasures&&l.clearResourceTimings?(h.mark=function(e){z(e),l.mark("start "+e)},h.stop=function(e){z(e),l.mark("end "+e);var r=l.measure(e,"start "+e,"end "+e);if(r)return r;var t=l.getEntriesByName(e);return t[t.length-1]},h.getEntries=function(){return l.getEntriesByType("measure")},h.clear=function(){l.clearMarks(),l.clearMeasures()}):(V={},X=[],h.mark=function(e){z(e);var r=_e();V["$"+e]=r},h.stop=function(e){z(e);var r=_e(),t=V["$"+e];if(!t)throw new Error("no known mark: "+e);var s={startTime:t,name:e,duration:r-t,entryType:"measure"};return Vr(X,s),s},h.getEntries=function(){return X},h.clear=function(){V={},X=[]});var V,X});var L,Ne,x,b,P,T,k,ae,Ue,Xr,Ge,R,a,ce=E(()=>{L=f(require("process"),1),Ne=require("events"),x=f(Fe(),1),b=f(Me(),1);P=L.default.platform==="win32",T=L.default.browser,k={red:T?"crimson":1,yellow:T?"gold":3,cyan:T?"darkturquoise":6,green:T?"forestgreen":2,blue:T?"steelblue":4,magenta:T?"palevioletred":5};x.default.colors=[k.cyan,k.green,k.blue,k.magenta];ae=class extends Ne.EventEmitter{issueStatus(r,t){(r==="status"||r==="statusEnd")&&this.emit(r,[r,...t])}issueWarning(r,t){this.emit("warning",[r,...t])}},Ue={},Xr=25,R=class e{static _logToStdErr(r,t){e.loggerfn(r)(...t)}static loggerfn(r){r=`LH:${r}`;let t=Ue[r];return t||(t=(0,x.default)(r),Ue[r]=t,r.endsWith("error")?t.color=k.red:r.endsWith("warn")&&(t.color=k.yellow)),t}static setLevel(r){switch(Ge=r,r){case"silent":x.default.enable("-LH:*");break;case"verbose":x.default.enable("LH:*");break;case"warn":x.default.enable("-LH:*, LH:*:warn, LH:*:error");break;case"error":x.default.enable("-LH:*, LH:*:error");break;default:x.default.enable("LH:*, -LH:*:verbose")}}static formatProtocol(r,t,s){let o=!L.default||L.default.browser?1/0:L.default.stdout.columns,n=t.method||"?????",c=o-n.length-r.length-Xr,d=t.params&&n!=="IO.read"?JSON.stringify(t.params).substr(0,c):"";e._logToStdErr(`${r}:${s||""}`,[n,d])}static isVerbose(){return Ge==="verbose"}static time({msg:r,id:t,args:s=[]},o="log"){b.mark(t),e[o]("status",r,...s)}static timeEnd({msg:r,id:t,args:s=[]},o="verbose"){e[o]("statusEnd",r,...s),b.stop(t)}static log(r,...t){return e.events.issueStatus(r,t),e._logToStdErr(r,t)}static warn(r,...t){return e.events.issueWarning(r,t),e._logToStdErr(`${r}:warn`,t)}static error(r,...t){return e._logToStdErr(`${r}:error`,t)}static verbose(r,...t){return e.events.issueStatus(r,t),e._logToStdErr(`${r}:verbose`,t)}static greenify(r){return`${e.green}${r}${e.reset}`}static redify(r){return`${e.red}${r}${e.reset}`}static get green(){return"\x1B[32m"}static get red(){return"\x1B[31m"}static get yellow(){return"\x1B[33m"}static get purple(){return"\x1B[95m"}static get reset(){return"\x1B[0m"}static get bold(){return"\x1B[1m"}static get dim(){return"\x1B[2m"}static get tick(){return P?"\u221A":"\u2713"}static get cross(){return P?"\xD7":"\u2718"}static get whiteSmallSquare(){return P?"\u0387":"\u25AB"}static get heavyHorizontal(){return P?"\u2500":"\u2501"}static get heavyVertical(){return P?"\u2502 ":"\u2503 "}static get heavyUpAndRight(){return P?"\u2514":"\u2517"}static get heavyVerticalAndRight(){return P?"\u251C":"\u2523"}static get heavyDownAndHorizontal(){return P?"\u252C":"\u2533"}static get doubleLightHorizontal(){return"\u2500\u2500"}};R.events=new ae;R.takeTimeEntries=()=>{let e=b.getEntries();return b.clear(),e};R.getTimeEntries=()=>b.getEntries();a=R});var Be=v((Ct,qe)=>{"use strict";var We=require("fs"),ue;function Jr(){try{return We.statSync("/.dockerenv"),!0}catch{return!1}}function Kr(){try{return We.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}qe.exports=()=>(ue===void 0&&(ue=Jr()||Kr()),ue)});var Ve=v((St,le)=>{"use strict";var Yr=require("os"),Zr=require("fs"),je=Be(),ze=()=>{if(process.platform!=="linux")return!1;if(Yr.release().toLowerCase().includes("microsoft"))return!je();try{return Zr.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!je():!1}catch{return!1}};process.env.__IS_WSL_TEST__?le.exports=ze:le.exports=ze()});function g(e,r){return typeof e>"u"?r:e}async function Ye(e){return new Promise(r=>setTimeout(r,e))}function w(){return Ke.default?"wsl":process.platform}function Ze(){switch(w()){case"darwin":case"linux":return rt();case"wsl":process.env.TEMP=pe(`${process.env.PATH}`);case"win32":return tt();default:throw new G}}function Qr(e=""){let r=/\/mnt\/([a-z])\//.exec(e);if(!r)return e;let t=r[1];return e.replace(`/mnt/${t}/`,`${t.toUpperCase()}:\\`).replace(/\//g,"\\")}function Qe(e=""){if(/[a-z]:\\/iu.test(e))return e;try{return Y.default.execFileSync("wslpath",["-w",e]).toString().trim()}catch{return Qr(e)}}function Z(e,r){try{return Y.default.execFileSync("wslpath",["-u",e]).toString().trim()}catch{return r}}function et(e){let t=/\/mnt\/([a-z])\/Users\/([^\/:]+)\/AppData\//.exec(e)||[];return`/mnt/${t[1]}/Users/${t[2]}/AppData/Local`}function pe(e){let t=/\/([a-z])\/Users\/([^\/:]+)\/AppData\//.exec(e)||[];return Z(`${t[1]}:\\Users\\${t[2]}\\AppData\\Local`,et(e))}function rt(){return Y.default.execSync("mktemp -d -t lighthouse.XXXXXXX").toString().trim()}function tt(){let e=process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp",r=Math.floor(Math.random()*9e7+1e7),t=(0,Xe.join)(e,"lighthouse."+r);return(0,Je.mkdirSync)(t,{recursive:!0}),t}var Xe,Y,Je,Ke,A,J,K,G,N,he=E(()=>{"use strict";Xe=require("path"),Y=f(require("child_process"),1),Je=require("fs"),Ke=f(Ve(),1);A=class extends Error{constructor(r="Unexpected error",t){return super(),this.message=r,this.code=t,this.stack=new Error().stack,this}},J=class extends A{constructor(){super(...arguments),this.message="The CHROME_PATH environment variable must be set to a Chrome/Chromium executable no older than Chrome stable.",this.code="ERR_LAUNCHER_PATH_NOT_SET"}},K=class extends A{constructor(){super(...arguments),this.message="userDataDir must be false or a path.",this.code="ERR_LAUNCHER_INVALID_USER_DATA_DIRECTORY"}},G=class extends A{constructor(){super(...arguments),this.message=`Platform ${w()} is not supported.`,this.code="ERR_LAUNCHER_UNSUPPORTED_PLATFORM"}},N=class extends A{constructor(){super(...arguments),this.message="No Chrome installations found.",this.code="ERR_LAUNCHER_NOT_INSTALLED"}}});var Q={};re(Q,{darwin:()=>rr,darwinFast:()=>de,linux:()=>st,win32:()=>tr,wsl:()=>ot});function de(){let e=[process.env.CHROME_PATH,process.env.LIGHTHOUSE_CHROMIUM_PATH,"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary","/Applications/Google Chrome.app/Contents/MacOS/Google Chrome"];for(let r of e)if(r&&C(r))return r;return rr()[0]}function rr(){let e=["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome"],r="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister",t=[],s=ge();s&&t.push(s),(0,F.execSync)(`${r} -dump | grep -i 'google chrome\\( canary\\)\\?\\.app' | awk '{$1=""; print $0}'`).toString().split(me).forEach(c=>{e.forEach(d=>{let S=m.default.join(c.substring(0,c.indexOf(".app")+4).trim(),d);C(S)&&t.indexOf(S)===-1&&t.push(S)})});let o=(0,$.default)(process.env.HOME||(0,fe.homedir)()),n=[{regex:new RegExp(`^${o}/Applications/.*Chrome\\.app`),weight:50},{regex:new RegExp(`^${o}/Applications/.*Chrome Canary\\.app`),weight:51},{regex:/^\/Applications\/.*Chrome.app/,weight:100},{regex:/^\/Applications\/.*Chrome Canary.app/,weight:101},{regex:/^\/Volumes\/.*Chrome.app/,weight:-2},{regex:/^\/Volumes\/.*Chrome Canary.app/,weight:-1}];return process.env.LIGHTHOUSE_CHROMIUM_PATH&&n.unshift({regex:new RegExp((0,$.default)(process.env.LIGHTHOUSE_CHROMIUM_PATH)),weight:150}),process.env.CHROME_PATH&&n.unshift({regex:new RegExp((0,$.default)(process.env.CHROME_PATH)),weight:151}),sr(t,n)}function ge(){if(C(process.env.CHROME_PATH))return process.env.CHROME_PATH;if(C(process.env.LIGHTHOUSE_CHROMIUM_PATH))return a.warn("ChromeLauncher","LIGHTHOUSE_CHROMIUM_PATH is deprecated, use CHROME_PATH env variable instead."),process.env.LIGHTHOUSE_CHROMIUM_PATH}function st(){let e=[],r=ge();if(r&&e.push(r),[m.default.join((0,fe.homedir)(),".local/share/applications/"),"/usr/share/applications/"].forEach(n=>{e=e.concat(it(n))}),["google-chrome-stable","google-chrome","chromium-browser","chromium"].forEach(n=>{try{let c=(0,F.execFileSync)("which",[n],{stdio:"pipe"}).toString().split(me)[0];C(c)&&e.push(c)}catch{}}),!e.length)throw new J;let o=[{regex:/chrome-wrapper$/,weight:51},{regex:/google-chrome-stable$/,weight:50},{regex:/google-chrome$/,weight:49},{regex:/chromium-browser$/,weight:48},{regex:/chromium$/,weight:47}];return process.env.LIGHTHOUSE_CHROMIUM_PATH&&o.unshift({regex:new RegExp((0,$.default)(process.env.LIGHTHOUSE_CHROMIUM_PATH)),weight:100}),process.env.CHROME_PATH&&o.unshift({regex:new RegExp((0,$.default)(process.env.CHROME_PATH)),weight:101}),sr(nt(e.filter(Boolean)),o)}function ot(){return process.env.LOCALAPPDATA=pe(`${process.env.PATH}`),process.env.PROGRAMFILES=Z("C:/Program Files","/mnt/c/Program Files"),process.env["PROGRAMFILES(X86)"]=Z("C:/Program Files (x86)","/mnt/c/Program Files (x86)"),tr()}function tr(){let e=[],r=[`${m.default.sep}Google${m.default.sep}Chrome SxS${m.default.sep}Application${m.default.sep}chrome.exe`,`${m.default.sep}Google${m.default.sep}Chrome${m.default.sep}Application${m.default.sep}chrome.exe`],t=[process.env.LOCALAPPDATA,process.env.PROGRAMFILES,process.env["PROGRAMFILES(X86)"]].filter(Boolean),s=ge();return s&&e.push(s),t.forEach(o=>r.forEach(n=>{let c=m.default.join(o,n);C(c)&&e.push(c)})),e}function sr(e,r){return e.map(s=>{for(let o of r)if(o.regex.test(s))return{path:s,weight:o.weight};return{path:s,weight:10}}).sort((s,o)=>o.weight-s.weight).map(s=>s.path)}function C(e){if(!e)return!1;try{return er.default.accessSync(e),!0}catch{return!1}}function nt(e){return Array.from(new Set(e))}function it(e){let r=/(^[^ ]+).*/,t="^Exec=/.*/(google-chrome|chrome|chromium)-.*",s=[];if(C(e)){let o;try{o=(0,F.execSync)(`grep -ER "${t}" ${e} | awk -F '=' '{print $2}'`,{stdio:"pipe"})}catch{o=(0,F.execSync)(`grep -Er "${t}" ${e} | awk -F '=' '{print $2}'`,{stdio:"pipe"})}o=o.toString().split(me).map(n=>n.replace(r,"$1")),o.forEach(n=>C(n)&&s.push(n))}return s}var er,m,fe,F,$,me,or=E(()=>{"use strict";er=f(require("fs"),1),m=f(require("path"),1),fe=require("os"),F=require("child_process"),$=f(xe(),1);ce();he();me=/\r?\n/});function ir(){return new Promise((e,r)=>{let t=(0,nr.createServer)();t.listen(0),t.once("listening",()=>{let{port:s}=t.address();t.close(()=>e(s))}),t.once("error",r)})}var nr,ar=E(()=>{"use strict";nr=require("http");});var we,cr=E(()=>{"use strict";we=["--disable-features="+["Translate","OptimizationHints","MediaRouter","DialMediaRouteProvider","CalculateNativeWinOcclusion","InterestFeedContentSuggestions","CertificateTransparencyComponentUpdater","AutofillServerCommunication","PrivacySandboxSettings4"].join(","),"--disable-extensions","--disable-component-extensions-with-background-pages","--disable-background-networking","--disable-component-update","--disable-client-side-phishing-detection","--disable-sync","--metrics-recording-only","--disable-default-apps","--mute-audio","--no-default-browser-check","--no-first-run","--disable-backgrounding-occluded-windows","--disable-renderer-backgrounding","--disable-background-timer-throttling","--disable-ipc-flooding-protection","--password-store=basic","--use-mock-keychain","--force-fieldtrials=*BackgroundTracing/default/","--disable-hang-monitor","--disable-prompt-on-repost","--disable-domain-reliability","--propagate-iph-for-testing"]});async function ht(e={}){e.handleSIGINT=g(e.handleSIGINT,!0);let r=new W(e);e.handleSIGINT&&O.size===0&&process.on(ur,lr),O.add(r),await r.launch();let t=()=>{O.delete(r),O.size===0&&process.removeListener(ur,lr),r.kill()};return{pid:r.pid,port:r.port,process:r.chromeProcess,remoteDebuggingPipes:r.remoteDebuggingPipes,kill:t}}function ft(){let e=W.getFirstInstallation();if(!e)throw new N;return e}function hr(){let e=[];for(let r of O)try{r.kill(),O.delete(r)}catch(t){e.push(t)}return e}var at,pr,ee,ct,ut,ur,lt,pt,O,lr,W,fr=E(()=>{"use strict";at=f(require("fs"),1),pr=f(require("net"),1);or();ar();cr();he();ee=require("child_process");ce();ct=w()==="wsl",ut=w()==="win32",ur="SIGINT",lt=130,pt=new Set(["darwin","linux","win32","wsl"]),O=new Set,lr=()=>{hr(),process.exit(lt)};W=class e{constructor(r={},t={}){if(this.opts=r,this.tmpDirandPidFileReady=!1,this.remoteDebuggingPipes=null,this.fs=t.fs||at,this.spawn=t.spawn||ee.spawn,a.setLevel(g(this.opts.logLevel,"silent")),this.startingUrl=g(this.opts.startingUrl,"about:blank"),this.chromeFlags=g(this.opts.chromeFlags,[]),this.prefs=g(this.opts.prefs,{}),this.requestedPort=g(this.opts.port,0),this.portStrictMode=r.portStrictMode,this.chromePath=this.opts.chromePath,this.ignoreDefaultFlags=g(this.opts.ignoreDefaultFlags,!1),this.connectionPollInterval=g(this.opts.connectionPollInterval,500),this.maxConnectionRetries=g(this.opts.maxConnectionRetries,50),this.envVars=g(r.envVars,Object.assign({},process.env)),typeof this.opts.userDataDir=="boolean")if(!this.opts.userDataDir)this.useDefaultProfile=!0,this.userDataDir=void 0;else throw new K;else this.useDefaultProfile=!1,this.userDataDir=this.opts.userDataDir;this.useRemoteDebuggingPipe=this.chromeFlags.some(s=>s.startsWith("--remote-debugging-pipe"))}get flags(){let r=this.ignoreDefaultFlags?[]:we.slice();return this.port&&r.push(`--remote-debugging-port=${this.port}`),!this.ignoreDefaultFlags&&w()==="linux"&&r.push("--disable-setuid-sandbox"),this.useDefaultProfile||r.push(`--user-data-dir=${ct?Qe(this.userDataDir):this.userDataDir}`),process.env.HEADLESS&&r.push("--headless"),r.push(...this.chromeFlags),r.push(this.startingUrl),r}static defaultFlags(){return we.slice()}static getFirstInstallation(){return w()==="darwin"?de():Q[w()]()[0]}static getInstallations(){return Q[w()]()}makeTmpDir(){return Ze()}prepare(){let r=w();if(!pt.has(r))throw new G;this.userDataDir=this.userDataDir||this.makeTmpDir(),this.outFile=this.fs.openSync(`${this.userDataDir}/chrome-out.log`,"a"),this.errFile=this.fs.openSync(`${this.userDataDir}/chrome-err.log`,"a"),this.setBrowserPrefs(),this.pidFile=`${this.userDataDir}/chrome.pid`,a.verbose("ChromeLauncher",`created ${this.userDataDir}`),this.tmpDirandPidFileReady=!0}setBrowserPrefs(){if(Object.keys(this.prefs).length===0)return;let r=`${this.userDataDir}/Default`;this.fs.existsSync(r)||this.fs.mkdirSync(r,{recursive:!0});let t=`${r}/Preferences`;try{if(this.fs.existsSync(t)){let s=this.fs.readFileSync(t,"utf-8"),o=JSON.parse(s);this.fs.writeFileSync(t,JSON.stringify({...o,...this.prefs}),"utf-8")}else this.fs.writeFileSync(t,JSON.stringify({...this.prefs}),"utf-8")}catch(s){a.log("ChromeLauncher",`Failed to set browser prefs: ${s.message}`)}}async launch(){if(this.requestedPort!==0){this.port=this.requestedPort;try{await this.isDebuggerReady(),a.log("ChromeLauncher",`Found existing Chrome already running using port ${this.port}, using that.`);return}catch{if(this.portStrictMode)throw new Error(`found no Chrome at port ${this.requestedPort}`);a.log("ChromeLauncher",`No debugging port found on port ${this.port}, launching a new Chrome.`)}}if(this.chromePath===void 0){let r=e.getFirstInstallation();if(!r)throw new N;this.chromePath=r}return this.tmpDirandPidFileReady||this.prepare(),this.pid=await this.spawnProcess(this.chromePath),Promise.resolve()}async spawnProcess(r){let s=await(async()=>this.chromeProcess?(a.log("ChromeLauncher",`Chrome already running with pid ${this.chromeProcess.pid}.`),this.chromeProcess.pid):(this.requestedPort===0&&(this.useRemoteDebuggingPipe?this.port=0:this.port=await ir()),a.verbose("ChromeLauncher",`Launching with command:
"${r}" ${this.flags.join(" ")}`),this.chromeProcess=this.spawn(r,this.flags,{detached:process.platform!=="win32",stdio:this.useRemoteDebuggingPipe?["ignore",this.outFile,this.errFile,"pipe","pipe"]:["ignore",this.outFile,this.errFile],env:this.envVars}),this.chromeProcess.pid&&this.fs.writeFileSync(this.pidFile,this.chromeProcess.pid.toString()),this.useRemoteDebuggingPipe&&(this.remoteDebuggingPipes={incoming:this.chromeProcess.stdio[4],outgoing:this.chromeProcess.stdio[3]}),a.verbose("ChromeLauncher",`Chrome running with pid ${this.chromeProcess.pid} on port ${this.port}.`),this.chromeProcess.pid))();return this.port!==0&&await this.waitUntilReady(),s}cleanup(r){r&&(r.removeAllListeners(),r.end(),r.destroy(),r.unref())}isDebuggerReady(){return new Promise((r,t)=>{let s=pr.createConnection(this.port,"127.0.0.1");s.once("error",o=>{this.cleanup(s),t(o)}),s.once("connect",()=>{this.cleanup(s),r()})})}waitUntilReady(){let r=this;return new Promise((t,s)=>{let o=0,n="Waiting for browser.",c=()=>{o===0&&a.log("ChromeLauncher",n),o++,n+="..",a.log("ChromeLauncher",n),r.isDebuggerReady().then(()=>{a.log("ChromeLauncher",n+`${a.greenify(a.tick)}`),t()}).catch(d=>{if(o>r.maxConnectionRetries){a.error("ChromeLauncher",d.message);let S=this.fs.readFileSync(`${this.userDataDir}/chrome-err.log`,{encoding:"utf-8"});return a.error("ChromeLauncher",`Logging contents of ${this.userDataDir}/chrome-err.log`),a.error("ChromeLauncher",S),s(d)}Ye(r.connectionPollInterval).then(c)})};c()})}kill(){if(this.chromeProcess){this.chromeProcess.on("close",()=>{delete this.chromeProcess,this.destroyTmp()}),a.log("ChromeLauncher",`Killing Chrome instance ${this.chromeProcess.pid}`);try{if(ut){let r=(0,ee.spawnSync)(`taskkill /pid ${this.chromeProcess.pid} /T /F`,{shell:!0,encoding:"utf-8"}),{stderr:t}=r;t&&a.error("ChromeLauncher","taskkill stderr",t)}else this.chromeProcess.pid&&process.kill(-this.chromeProcess.pid,"SIGKILL")}catch(r){let t=`Chrome could not be killed ${r.message}`;a.warn("ChromeLauncher",t)}this.destroyTmp()}}destroyTmp(){if(this.outFile&&(this.fs.closeSync(this.outFile),delete this.outFile),this.userDataDir===void 0||this.opts.userDataDir!==void 0)return;this.errFile&&(this.fs.closeSync(this.errFile),delete this.errFile),(this.fs.rmSync||this.fs.rmdirSync)(this.userDataDir,{recursive:!0,force:!0,maxRetries:10})}}});var mr={};re(mr,{Launcher:()=>W,getChromePath:()=>ft,killAll:()=>hr,launch:()=>ht});var dr=E(()=>{fr()});var gt={};re(gt,{activate:()=>mt,deactivate:()=>dt});module.exports=Er(gt);var gr=f(require("vscode")),ye=f(require("path")),wr=require("child_process"),y=null;function mt(e){if(!y){let r=ye.join(e.extensionPath,"dist","camera_hub.js");y=(0,wr.spawn)("node",[r]),y.stdout.on("data",t=>{console.log(`[controller]: ${t}`)}),y.stderr.on("data",t=>{console.error(`[controller ERROR]: ${t}`)}),y.on("close",t=>{console.log(`[controller] exited with code ${t}`),y=null})}e.subscriptions.push(gr.commands.registerCommand("PosturePolice.startApp",async()=>{(await Promise.resolve().then(()=>(dr(),mr))).launch({ignoreDefaultFlags:!0,chromeFlags:[`--app=file:///${ye.join(e.extensionPath,"camera","camera.html").replace(/\\/g,"/")}`,"--disable-background-timer-throttling","--disable-renderer-backgrounding","--disable-backgrounding-occluded-windows","--disable-background-media-suspend","--autoplay-policy=no-user-gesture-required"]})}))}function dt(){y&&!y.killed&&(y.kill(),y=null)}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

lighthouse-logger/index.js:
  (**
   * @license Copyright 2016 The Lighthouse Authors. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/utils.js:
chrome-launcher/dist/flags.js:
  (**
   * @license Copyright 2017 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/chrome-finder.js:
chrome-launcher/dist/random-port.js:
chrome-launcher/dist/chrome-launcher.js:
  (**
   * @license Copyright 2016 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)
*/
